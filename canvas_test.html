<!DOCTYPE html>
<html>
  <head>
    <title>
      Canvas test
    </title>
    <link rel="stylesheet" href="navigation_bar.css" />
  </head>
  <body>
    <div class="topnav">
      <a class="active" href="#home">FLS</a>
      <a class="about" href="#About">About</a>
      <a class="help" href="#Help">Help</a>
    </div>

    <div style="display: flex;">
      <div style="position: relative; display: inline-block;">
        <canvas
          onclick="krug(event)"
          id="canvas"
          width="800"
          height="400"
          style="border:2px solid #d3d3d3;"
        >
        </canvas>
      </div>
      <div
        style="position: relative; display: inline-block; height: 400px; width: 30%; overflow-y: scroll;"
      >
        <ol></ol>
      </div>
    </div>
  </body>
</html>

<script>
  function circle(canvasContext, x, y) {
    canvasContext.fillStyle = "yellow";
    canvasContext.beginPath();
    canvasContext.arc(x, y, 5, 0, 2 * Math.PI);
    canvasContext.stroke();
    canvasContext.fill();
  }

  window.onload = function() {
    var img = new Image();
    img.src = "http://fll.memphisfirstteams.org/files/2019/04/Capture.jpg";

    img.onload = function() {
      fill_canvas(img);
    };

    function fill_canvas(img) {
      console.log(canvas, canvas.width, canvas.height);
      img.width = canvas.width;
      img.height = canvas.height;

      ctx.globalAlpha = 0.5;

      ctx.drawImage(img, 0, 0);
    }
  };

  var lista = [];
  var a = 0;
  var canvas = document.getElementById("canvas");
  var ctx = canvas.getContext("2d");
  var i = 1;
  var output = "";

  function resize() {
    const width = Math.floor(document.querySelector("body").clientWidth * 0.7);
    const aspect = 2;

    // document.querySelector("canvas").width = width;
    // document.querySelector("canvas").height = width / aspect;
  }

  document.querySelector("body").onresize = resize;
  resize();

  function krug(event) {
    var x = event.x;
    var y = event.y;

    x -= canvas.offsetLeft;
    y -= canvas.offsetTop;
    ctx.fillStyle = "yellow";
    circle(ctx, x, y);
    console.log("x: " + x + " y: " + y);

    lista.push([x, y]);

    console.log(lista);

    if (lista.length > 1) {
      var lista1 = lista[a];
      var prvi1 = lista1[0];
      var drugi1 = lista1[1];
      var lista2 = lista[a + 1];
      var prvi2 = lista2[0];
      var drugi2 = lista2[1];
      ctx.moveTo(prvi1, drugi1);
      ctx.lineTo(prvi2, drugi2);
      ctx.stroke();
      a = a + 1;
      ctx.fillStyle = "yellow";
      circle(ctx, prvi1, drugi1);
      circle(ctx, prvi2, drugi2);
    }

    var k = lista[lista.length - 1];

    output += `<li id="a${i}">(${k})</li>`;
    console.log(i);
    document.querySelector("ol").innerHTML = output;
    i = i + 1;
  }
</script>
